require.config({baseUrl:"static/js/",paths:{jquery:"../libs/jquery",md5:"../libs/md5",sweetalert:"../libs/sweetalert.min"}}),require(["jquery","config","base","md5","sweetalert"],function(t,e,i,n,o){i.FZ(20,375),i.scrollText("#dopetext","#removebt"),i.refreshPage("#refreshbt");var a=i.getSe("addetail");if(!a)return void o({title:"",text:"出错了，请返回任务列表重新接取",type:"error",closeOnConfirm:!0,confirmButtonText:"确定",confirmButtonColor:"#ec6c62"},function(){window.history.back()});+function(i){t(".g-taskhighdetail .g-header-inner").append('<i style="background:url('+e.imgUrl+i.adLogo+') 0 0 no-repeat;background-size:contain;"></i><span class="title">'+i.adTitle+'</span><span class="prize">+'+(i.adRegIncome/100).toFixed(2)+"元</span>")}(a)+function(e){var i=e.adChargeDesc.split("|");t(".g-taskhighdetail .m-step-inner").append('<div class="title">任务步骤<span id="time-cutdown" class="time-cutdown">(剩余时间：-)</span></div><div class="text"></div></div>'),t.each(i,function(e,i){/{/gi.test(i)&&/}/gi.test(i)&&(i=i.replace(/{/gi,'<span style="color:#ff1b02;">'),i=i.replace(/}/gi,"</span>")),t(".g-taskhighdetail .m-step .text").append("<p>"+(e+1)+"、"+i+"</p>")})}(a)+function(e){e.adChargeDesc.split("|");t(".m-finish-text").append('<div class="title">任务说明</div><div class="text"></div></div>'),t(".m-finish-text .text").append("<p>"+e.adImgExampleDesc+"</p>")}(a)+function(n){t(".btn-back").on("click",function(t){t.preventDefault(),o({title:"",text:"确定要放弃当前任务?",type:"warning",showCancelButton:!0,closeOnConfirm:!0,cancelButtonText:"取消",confirmButtonText:"放弃任务",confirmButtonColor:"#ec6c62"},function(){var t=i.getLocal("doingAdid");i.giveupTask(t,function(){window.history.back()})})}),t(".btn-detail").on("click",function(){window.location.href="taskhighstep.html"}),t(".btn-start").on("click",function(){t(".btn-finish").removeClass("forbid"),window.open(e.adurl(n.adUrl))}),t("#get-yzm").on("click",function(){t("#ipt-tel").val()?i.getdata({t:6006,c:[{mobile:t("#ipt-tel").val()}]},function(t){i.swtoast("验证码发送成功")}):i.swtoast("请输入手机号")}),t(".btn-finish").on("click",function(){c(this)})}(a);var s,c=function(e){return!t(e).hasClass("forbid")&&void(r()&&(i.getdata({t:5001,c:[{devid:i.g.devid,memberid:i.g.id,keyword:a.adId,images:"",md5s:"",devtoken:"",signkey:t("#ipt-tel").val()}]},function(t){o({title:"",text:"提交审核成功",type:"success",showCancelButton:!1,confirmButtonText:"确定"},function(){i.remLocal("doingAdid"),i.remSe("addetail"),i.remSe("time"),window.history.back()})}),i.remLocal("doingAdid")))},r=function(){var e=t("#ipt-name"),n=t("#ipt-tel"),o=t("#ipt-yzm");return e.val()?n.val()?o.val()?!!/^(0|86|17951)?1\d{10}$/.test(n.val())||(i.swtoast("请输入正确的手机号"),!1):(i.swtoast("请输入验证码"),!1):(i.swtoast("请输入所填写的手机号"),!1):(i.swtoast("请输入所填写的姓名"),!1)},l=function(){o({title:"",text:"任务已超时，请重新开始任务",type:"error",showCancelButton:!1,confirmButtonText:"确定",confirmButtonColor:"#ec6c62"},function(){var t=i.getLocal("doingAdid");i.giveupTask(t,function(){window.history.back()})})},d=function(){s&&clearInterval(s);var n=(new Date).getTime(),o=i.getSe("time"),a=1e3*e.timeout-(n-o);a<=0?l():s=setInterval(function(){a-=1e3;var e=i.format0(parseInt(a/1e3/60),2),n=i.format0(parseInt(a/1e3%60),2);t("#time-cutdown").html("(剩余时间："+e+":"+n+")"),a<=0&&l()},1e3)};d(),i.pageVisibility.visibilitychange(function(){this.hidden||(t("#time-cutdown").html("(剩余时间：-"),d())})});