require.config({baseUrl:"static/js/",paths:{jquery:"../libs/jquery",md5:"../libs/md5",sweetalert:"../libs/sweetalert.min"}}),require(["jquery","config","base","md5","sweetalert"],function(t,e,i,n,a){i.FZ(20,375),i.refreshPage("#refreshbt");var o=i.getSe("addetail");if(!o)return void a({title:"",text:"出错了，请返回任务列表重新接取",type:"error",closeOnConfirm:!0,confirmButtonText:"确定",confirmButtonColor:"#ec6c62"},function(){window.history.back()});+function(i){t(".g-taskhighdetail .g-header-inner").append('<i style="background:url('+e.imgUrl+i.adLogo+') 0 0 no-repeat;background-size:contain;"></i><span class="title">'+i.adTitle+'</span><span class="prize">+'+(i.adRegIncome/100).toFixed(2)+"元</span>")}(o)+function(e){var i=e.adChargeDesc.split("|");t(".g-taskhighdetail .m-step-inner").append('<div class="title">任务步骤<span id="time-cutdown" class="time-cutdown">(剩余时间：-)</span></div><div class="text"></div></div>'),t.each(i,function(e,i){/{/gi.test(i)&&/}/gi.test(i)&&(i=i.replace(/{/gi,'<span style="color:#ff1b02;">'),i=i.replace(/}/gi,"</span>")),t(".g-taskhighdetail .m-step .text").append("<p>"+(e+1)+"、"+i+"</p>")})}(o)+function(e){e.adChargeDesc.split("|");t(".m-finish-text").append('<div class="title">任务说明</div><div class="text"></div></div>'),t(".m-finish-text .text").append("<p>"+e.adImgExampleDesc+"</p>")}(o)+function(n){t(".btn-back").on("click",function(t){t.preventDefault(),a({title:"",text:"确定要放弃当前任务?",type:"warning",showCancelButton:!0,closeOnConfirm:!0,cancelButtonText:"取消",confirmButtonText:"放弃任务",confirmButtonColor:"#ec6c62"},function(){var t=i.getLocal("doingAdid");i.giveupTask(t,function(){window.history.back()})})}),t(".btn-detail").on("click",function(){window.location.href="taskhighstep.html"}),t(".btn-start").on("click",function(){t(".btn-finish").removeClass("forbid"),window.open(e.adurl(n.adUrl))}),t("#get-yzm").on("click",function(){t("#ipt-tel").val()?i.getdata({t:6006,c:[{mobile:t("#ipt-tel").val()}]},function(t){i.swtoast("验证码发送成功")}):i.swtoast("请输入手机号")}),t(".btn-finish").on("click",function(){c(this)})}(o);var s,c=function(e){return!t(e).hasClass("forbid")&&void d(function(e){1==e&&(i.getdata({t:5001,c:[{devid:i.g.devid,memberid:i.g.id,keyword:o.adId,images:"",md5s:"",devtoken:"",signkey:t("#ipt-tel").val(),signname:t("#ipt-name").val()}]},function(t){a({title:"",text:"提交审核成功",type:"success",showCancelButton:!1,confirmButtonText:"确定"},function(){i.remLocal("doingAdid"),i.remSe("addetail"),i.remSe("time"),window.history.back()})}),i.remLocal("doingAdid"))})},d=function(e){var n=t("#ipt-name"),a=t("#ipt-tel"),o=t("#ipt-yzm");return n.val()?a.val()?o.val()?/^(0|86|17951)?1\d{10}$/.test(a.val())?void i.getdata({t:6007,c:[{mobile:a.val(),code:o.val()}]},function(t){0==t.status?e(1):i.swtoast("验证码错误")}):void i.swtoast("请输入正确的手机号"):void i.swtoast("请输入验证码"):void i.swtoast("请输入所填写的手机号"):void i.swtoast("请输入所填写的姓名")},r=function(){a({title:"",text:"任务已超时，请重新开始任务",type:"error",showCancelButton:!1,confirmButtonText:"确定",confirmButtonColor:"#ec6c62"},function(){var t=i.getLocal("doingAdid");i.giveupTask(t,function(){window.history.back()})})},l=function(){s&&clearInterval(s);var n=(new Date).getTime(),a=i.getSe("time"),o=1e3*e.timeout-(n-a);o<=0?r():s=setInterval(function(){o-=1e3;var e=i.format0(parseInt(o/1e3/60),2),n=i.format0(parseInt(o/1e3%60),2);t("#time-cutdown").html("(剩余时间："+e+":"+n+")"),o<=0&&r()},1e3)};l(),i.pageVisibility.visibilitychange(function(){this.hidden||(t("#time-cutdown").html("(剩余时间：-"),l())})});